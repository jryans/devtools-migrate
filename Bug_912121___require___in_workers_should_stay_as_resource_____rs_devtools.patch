# HG changeset patch
# User J. Ryan Stinnett <jryans@gmail.com>
# Date 1440041081 18000
#      Wed Aug 19 22:24:41 2015 -0500
# Node ID 25a5a3271946bc75d74ce46c9e7452e2e52e0676
# Parent  ae3ba8cad0211e3e37f413a181fa8c0c4d74d5eb
Bug 912121 - require() in workers should stay as resource://. rs=devtools

diff --git a/devtools/client/shared/widgets/GraphsWorker.js b/devtools/client/shared/widgets/GraphsWorker.js
--- a/devtools/client/shared/widgets/GraphsWorker.js
+++ b/devtools/client/shared/widgets/GraphsWorker.js
@@ -2,17 +2,17 @@
  * License, v. 2.0. If a copy of the MPL was not distributed with this
  * file, You can obtain one at http://mozilla.org/MPL/2.0/. */
 "use strict";

 /**
  * Import `createTask` to communicate with `devtools/toolkit/shared/worker`.
  */
 importScripts("resource://gre/modules/workers/require.js");
-const { createTask } = require("devtools/shared/shared/worker-helper");
+const { createTask } = require("resource://gre/modules/devtools/shared/shared/worker-helper");

 /**
  * @see LineGraphWidget.prototype.setDataFromTimestamps in Graphs.js
  * @param number id
  * @param array timestamps
  * @param number interval
  * @param number duration
  */
diff --git a/devtools/shared/shared/worker.js b/devtools/shared/shared/worker.js
--- a/devtools/shared/shared/worker.js
+++ b/devtools/shared/shared/worker.js
@@ -155,14 +155,14 @@ function workerify (fn) {
 exports.workerify = workerify;

 /**
  * Takes a function, and stringifies it, attaching the worker-helper.js
  * boilerplate hooks.
  */
 function createWorkerString (fn) {
   return `importScripts("resource://gre/modules/workers/require.js");
-    const { createTask } = require("devtools/shared/shared/worker-helper");
+    const { createTask } = require("resource://gre/modules/devtools/shared/shared/worker-helper");
     createTask(self, "workerifiedTask", ${fn.toString()});
   `;
 }

 });
